import{a1 as g,S as z,i as N,s as P,p as Ze,r as We,v as Xe,w as Ye,t as p,k as _,a2 as de,M as be,O as M,a3 as xe,G as A,d as E,h as I,j as H,m as j,y as T,Z as G,B as $,D as F,P as me,Q as ge,F as k,H as et,a0 as D,n as tt,A as we,E as ye,z as $e,I as Fe,J as K,L as R}from"./index-39560f2e.js";const ke=r=>{const e=Object.entries(r),s=e.map(([t])=>t);return g(e.map(([,t])=>t),t=>Object.fromEntries(t.map((n,o)=>[s[o],n])))},st=r=>r&1,nt=r=>({}),fe=r=>({...r[0]});function rt(r){let e;const s=r[3].default,t=Ze(s,r,r[2],fe);return{c(){t&&t.c()},m(n,o){t&&t.m(n,o),e=!0},p(n,[o]){t&&t.p&&(!e||o&5)&&We(t,s,n,n[2],st(o)||!e?Xe(n[2]):Ye(s,n[2],o,nt),fe)},i(n){e||(p(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function ot(r,e,s){const t=[];let n=de(e,t),o,{$$slots:i={},$$scope:l}=e;const a=ke(n);return be(r,a,c=>s(0,o=c)),r.$$set=c=>{e=M(M({},e),xe(c)),s(4,n=de(e,t)),"$$scope"in c&&s(2,l=c.$$scope)},[o,a,l,i]}class lt extends z{constructor(e){super(),N(this,e,ot,rt,P,{})}}function he(r,e,s){const t=r.slice();return t[5]=e[s],t}function it(r){let e,s,t;const n=[r[2]??{}];var o=r[1].component;function i(l){let a={$$slots:{default:[ct]},$$scope:{ctx:l}};for(let c=0;c<n.length;c+=1)a=M(a,n[c]);return{props:a}}return o&&(e=G(o,i(r)),r[4](e)),{c(){e&&$(e.$$.fragment),s=A()},m(l,a){e&&F(e,l,a),E(l,s,a),t=!0},p(l,a){const c=a&4?me(n,[ge(l[2]??{})]):{};if(a&258&&(c.$$scope={dirty:a,ctx:l}),o!==(o=l[1].component)){if(e){I();const d=e;_(d.$$.fragment,1,0,()=>{k(d,1)}),H()}o?(e=G(o,i(l)),l[4](e),$(e.$$.fragment),p(e.$$.fragment,1),F(e,s.parentNode,s)):e=null}else o&&e.$set(c)},i(l){t||(e&&p(e.$$.fragment,l),t=!0)},o(l){e&&_(e.$$.fragment,l),t=!1},d(l){r[4](null),l&&j(s),e&&k(e,l)}}}function at(r){let e,s,t;const n=[r[2]??{}];var o=r[1].component;function i(l){let a={};for(let c=0;c<n.length;c+=1)a=M(a,n[c]);return{props:a}}return o&&(e=G(o,i()),r[3](e)),{c(){e&&$(e.$$.fragment),s=A()},m(l,a){e&&F(e,l,a),E(l,s,a),t=!0},p(l,a){const c=a&4?me(n,[ge(l[2]??{})]):{};if(o!==(o=l[1].component)){if(e){I();const d=e;_(d.$$.fragment,1,0,()=>{k(d,1)}),H()}o?(e=G(o,i()),l[3](e),$(e.$$.fragment),p(e.$$.fragment,1),F(e,s.parentNode,s)):e=null}else o&&e.$set(c)},i(l){t||(e&&p(e.$$.fragment,l),t=!0)},o(l){e&&_(e.$$.fragment,l),t=!1},d(l){r[3](null),l&&j(s),e&&k(e,l)}}}function pe(r){let e,s;return e=new Ct({props:{of:r[5]}}),{c(){$(e.$$.fragment)},m(t,n){F(e,t,n),s=!0},p(t,n){const o={};n&2&&(o.of=t[5]),e.$set(o)},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){_(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function ct(r){let e,s,t=r[1].children,n=[];for(let i=0;i<t.length;i+=1)n[i]=pe(he(r,t,i));const o=i=>_(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=A()},m(i,l){for(let a=0;a<n.length;a+=1)n[a].m(i,l);E(i,e,l),s=!0},p(i,l){if(l&2){t=i[1].children;let a;for(a=0;a<t.length;a+=1){const c=he(i,t,a);n[a]?(n[a].p(c,l),p(n[a],1)):(n[a]=pe(c),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(I(),a=t.length;a<n.length;a+=1)o(a);H()}},i(i){if(!s){for(let l=0;l<t.length;l+=1)p(n[l]);s=!0}},o(i){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)_(n[l]);s=!1},d(i){et(n,i),i&&j(e)}}}function ut(r){let e,s,t,n;const o=[at,it],i=[];function l(a,c){return a[1].children.length===0?0:1}return e=l(r),s=i[e]=o[e](r),{c(){s.c(),t=A()},m(a,c){i[e].m(a,c),E(a,t,c),n=!0},p(a,[c]){let d=e;e=l(a),e===d?i[e].p(a,c):(I(),_(i[d],1,1,()=>{i[d]=null}),H(),s=i[e],s?s.p(a,c):(s=i[e]=o[e](a),s.c()),p(s,1),s.m(t.parentNode,t))},i(a){n||(p(s),n=!0)},o(a){_(s),n=!1},d(a){i[e].d(a),a&&j(t)}}}function dt(r,e,s){let{instance:t=void 0}=e,{config:n}=e,{props:o=void 0}=e;function i(a){T[a?"unshift":"push"](()=>{t=a,s(0,t)})}function l(a){T[a?"unshift":"push"](()=>{t=a,s(0,t)})}return r.$$set=a=>{"instance"in a&&s(0,t=a.instance),"config"in a&&s(1,n=a.config),"props"in a&&s(2,o=a.props)},[t,n,o,i,l]}class Ce extends z{constructor(e){super(),N(this,e,dt,ut,P,{instance:0,config:1,props:2})}}const re=r=>r?.subscribe instanceof Function,ft=D(void 0);function ht(r){let e,s,t;function n(i){r[3](i)}let o={config:r[0],props:r[0].props};return r[1]!==void 0&&(o.instance=r[1]),e=new Ce({props:o}),T.push(()=>we(e,"instance",n,r[1])),{c(){$(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const a={};l&1&&(a.config=i[0]),l&1&&(a.props=i[0].props),!s&&l&2&&(s=!0,a.instance=i[1],ye(()=>s=!1)),e.$set(a)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){k(e,i)}}}function pt(r){let e,s;return e=new lt({props:{props:r[0].props,$$slots:{default:[_t,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){$(e.$$.fragment)},m(t,n){F(e,t,n),s=!0},p(t,n){const o={};n&1&&(o.props=t[0].props),n&51&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){_(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function _t(r){let e,s,t;function n(i){r[2](i)}let o={config:r[0],props:r[4]};return r[1]!==void 0&&(o.instance=r[1]),e=new Ce({props:o}),T.push(()=>we(e,"instance",n,r[1])),{c(){$(e.$$.fragment)},m(i,l){F(e,i,l),t=!0},p(i,l){const a={};l&1&&(a.config=i[0]),l&16&&(a.props=i[4]),!s&&l&2&&(s=!0,a.instance=i[1],ye(()=>s=!1)),e.$set(a)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){k(e,i)}}}function bt(r){let e,s,t,n,o;const i=[pt,ht],l=[];function a(c,d){return d&1&&(e=null),e==null&&(e=!!re(c[0].props)),e?0:1}return s=a(r,-1),t=l[s]=i[s](r),{c(){t.c(),n=A()},m(c,d){l[s].m(c,d),E(c,n,d),o=!0},p(c,[d]){let m=s;s=a(c,d),s===m?l[s].p(c,d):(I(),_(l[m],1,1,()=>{l[m]=null}),H(),t=l[s],t?t.p(c,d):(t=l[s]=i[s](c),t.c()),p(t,1),t.m(n.parentNode,n))},i(c){o||(p(t),o=!0)},o(c){_(t),o=!1},d(c){l[s].d(c),c&&j(n)}}}function mt(r,e,s){let{config:t}=e,n;tt(function(){return t.eventHandlers.forEach(([a,c])=>{const d=n.$$.callbacks[a]??[];d.push(c),s(1,n.$$.callbacks[a]=d,n)}),function(){t.eventHandlers.forEach(([c,d])=>{const m=n.$$.callbacks[c],S=m.findIndex(O=>O===d);m.splice(S,1)})}});function o(l){n=l,s(1,n)}function i(l){n=l,s(1,n)}return r.$$set=l=>{"config"in l&&s(0,t=l.config)},[t,n,o,i]}class gt extends z{constructor(e){super(),N(this,e,mt,bt,P,{config:0})}}function wt(r){let e,s;return e=new gt({props:{config:r[0]}}),{c(){$(e.$$.fragment)},m(t,n){F(e,t,n),s=!0},p(t,n){const o={};n&1&&(o.config=t[0]),e.$set(o)},i(t){s||(p(e.$$.fragment,t),s=!0)},o(t){_(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function yt(r){let e;return{c(){e=$e(r[0])},m(s,t){E(s,e,t)},p(s,t){t&1&&Fe(e,s[0])},i:K,o:K,d(s){s&&j(e)}}}function $t(r){let e;return{c(){e=$e(r[1])},m(s,t){E(s,e,t)},p(s,t){t&2&&Fe(e,s[1])},i:K,o:K,d(s){s&&j(e)}}}function Ft(r){let e,s,t,n,o;const i=[$t,yt,wt],l=[];function a(c,d){return d&1&&(e=null),e==null&&(e=!!re(c[0])),e?0:typeof c[0]!="object"?1:2}return s=a(r,-1),t=l[s]=i[s](r),{c(){t.c(),n=A()},m(c,d){l[s].m(c,d),E(c,n,d),o=!0},p(c,[d]){let m=s;s=a(c,d),s===m?l[s].p(c,d):(I(),_(l[m],1,1,()=>{l[m]=null}),H(),t=l[s],t?t.p(c,d):(t=l[s]=i[s](c),t.c()),p(t,1),t.m(n.parentNode,n))},i(c){o||(p(t),o=!0)},o(c){_(t),o=!1},d(c){l[s].d(c),c&&j(n)}}}function kt(r,e,s){let t,{of:n}=e;const o=re(n)?n:ft;return be(r,o,i=>s(1,t=i)),r.$$set=i=>{"of"in i&&s(0,n=i.of)},[n,t,o]}class Ct extends z{constructor(e){super(),N(this,e,kt,Ft,P,{of:0})}}class Ee{header;footer;height;plugins;constructor({header:e,footer:s,height:t,plugins:n}){this.header=e,this.footer=s,this.height=t,this.plugins=n}isFlat(){return"__flat"in this}isData(){return"__data"in this}isDisplay(){return"__display"in this}isGroup(){return"__group"in this}}class je extends Ee{__flat=!0;id;constructor({header:e,footer:s,plugins:t,id:n}){super({header:e,footer:s,plugins:t,height:1}),this.id=n}}class Et extends je{__data=!0;cell;accessorKey;accessorFn;constructor({header:e,footer:s,plugins:t,cell:n,accessor:o,id:i}){if(super({header:e,footer:s,plugins:t,id:"Initialization not complete"}),this.cell=n,o instanceof Function?this.accessorFn=o:this.accessorKey=o,i===void 0&&this.accessorKey===void 0)throw new Error("A column id or string accessor is required");this.id=i??String(this.accessorKey)}getValue(e){if(this.accessorFn!==void 0)return this.accessorFn(e);if(this.accessorKey!==void 0)return e[this.accessorKey]}}class jt extends je{__display=!0;cell;data;constructor({header:e,footer:s,plugins:t,id:n,cell:o,data:i}){super({header:e,footer:s,plugins:t,id:n}),this.cell=o,this.data=i}}class Rt extends Ee{__group=!0;columns;ids;constructor({header:e,footer:s,columns:t,plugins:n}){const o=Math.max(...t.map(i=>i.height))+1;super({header:e,footer:s,height:o,plugins:n}),this.columns=t,this.ids=Re(t)}}const Re=r=>r.flatMap(e=>e.isFlat()?[e.id]:e.isGroup()?e.ids:[]),ve=r=>r.flatMap(e=>e.isFlat()?[e]:e.isGroup()?ve(e.columns):[]),vt=r=>{const e=new Map;return r.forEach(s=>{e.set(s,(e.get(s)??0)+1)}),e},At=r=>Array.from(vt(r).entries()).filter(([,e])=>e!==1).map(([e])=>e),It=r=>Object.entries(r).map(([e,s])=>`${e}:${s}`).join(";"),Ht=(r,e)=>r.style===void 0&&e.style===void 0?{...r,...e}:{...r,...e,style:{...typeof r.style=="object"?r.style:{},...typeof e.style=="object"?e.style:{}}},B=r=>r.style===void 0||typeof r.style!="object"?r:{...r,style:It(r.style)};class V{id;constructor({id:e}){this.id=e}attrsForName={};attrs(){return g(Object.values(this.attrsForName),e=>{let s={};return e.forEach(t=>{s=Ht(s,t)}),B(s)})}propsForName={};props(){return ke(this.propsForName)}state;injectState(e){this.state=e}applyHook(e,s){s.props!==void 0&&(this.propsForName[e]=s.props),s.attrs!==void 0&&(this.attrsForName[e]=s.attrs)}}class Ae extends V{row;constructor({id:e,row:s}){super({id:e}),this.row=s}attrs(){return g(super.attrs(),e=>({...e,role:"cell"}))}rowColId(){return`${this.row.id}:${this.column.id}`}dataRowColId(){if(this.row.isData())return`${this.row.dataId}:${this.column.id}`}isData(){return"__data"in this}isDisplay(){return"__display"in this}}class U extends Ae{__data=!0;column;label;value;constructor({row:e,column:s,label:t,value:n}){super({id:s.id,row:e}),this.column=s,this.label=t,this.value=n}render(){if(this.label===void 0)return`${this.value}`;if(this.state===void 0)throw new Error("Missing `state` reference");return this.label(this,this.state)}clone(){return new U({row:this.row,column:this.column,label:this.label,value:this.value})}}class q extends Ae{__display=!0;column;label;constructor({row:e,column:s,label:t}){super({id:s.id,row:e}),this.column=s,this.label=t}render(){if(this.state===void 0)throw new Error("Missing `state` reference");return this.label(this,this.state)}clone(){return new q({row:this.row,column:this.column,label:this.label})}}const Ut=r=>r!==null,C=r=>r!==void 0;class Ie extends V{cells;cellForId;depth;parentRow;subRows;constructor({id:e,cells:s,cellForId:t,depth:n=0,parentRow:o}){super({id:e}),this.cells=s,this.cellForId=t,this.depth=n,this.parentRow=o}attrs(){return g(super.attrs(),e=>({...e,role:"row"}))}isData(){return"__data"in this}isDisplay(){return"__display"in this}}class J extends Ie{__data=!0;dataId;original;constructor({id:e,dataId:s,original:t,cells:n,cellForId:o,depth:i=0,parentRow:l}){super({id:e,cells:n,cellForId:o,depth:i,parentRow:l}),this.dataId=s,this.original=t}clone({includeCells:e=!1,includeSubRows:s=!1}={}){const t=new J({id:this.id,dataId:this.dataId,cellForId:this.cellForId,cells:this.cells,original:this.original,depth:this.depth});if(e){const n=Object.fromEntries(Object.entries(t.cellForId).map(([i,l])=>{const a=l.clone();return a.row=t,[i,a]})),o=t.cells.map(({id:i})=>n[i]);t.cellForId=n,t.cells=o}if(s){const n=this.subRows?.map(o=>o.clone({includeCells:e,includeSubRows:s}));t.subRows=n}else t.subRows=this.subRows;return t}}class He extends Ie{__display=!0;constructor({id:e,cells:s,cellForId:t,depth:n=0,parentRow:o}){super({id:e,cells:s,cellForId:t,depth:n,parentRow:o})}clone({includeCells:e=!1,includeSubRows:s=!1}={}){const t=new He({id:this.id,cellForId:this.cellForId,cells:this.cells,depth:this.depth});if(t.subRows=this.subRows,e){const n=Object.fromEntries(Object.entries(t.cellForId).map(([i,l])=>{const a=l.clone();return a.row=t,[i,a]})),o=t.cells.map(({id:i})=>n[i]);t.cellForId=n,t.cells=o}if(s){const n=this.subRows?.map(o=>o.clone({includeCells:e,includeSubRows:s}));t.subRows=n}else t.subRows=this.subRows;return t}}const St=(r,e,{rowDataId:s}={})=>{const t=r.map((n,o)=>{const i=o.toString();return new J({id:i,dataId:s!==void 0?s(n,o):i,original:n,cells:[],cellForId:{}})});return r.forEach((n,o)=>{const i=e.map(l=>{if(l.isData()){const a=l,c=a.getValue(n);return new U({row:t[o],column:a,label:l.cell,value:c})}if(l.isDisplay()){const a=l;return new q({row:t[o],column:a,label:l.cell})}throw new Error("Unrecognized `FlatColumn` implementation")});t[o].cells=i,e.forEach((l,a)=>{t[o].cellForId[l.id]=i[a]})}),t},Ot=(r,e)=>{const s=r.map(t=>{const n=t.clone();return n.cells=[],n.cellForId={},n});return r.length===0||e.length===0?r:(r.forEach((t,n)=>{const o=t.cells.map(l=>{const a=l.clone();return a.row=s[n],a}),i=e.map(l=>o.find(a=>a.id===l)).filter(C);s[n].cells=i,o.forEach(l=>{s[n].cellForId[l.id]=l})}),s)},qt=(r,e,{rowDataId:s}={})=>{const t=r.map((n,o)=>{const i=`${e.id}>${o}`;return new J({id:i,dataId:s!==void 0?s(n,o):i,original:n,cells:[],cellForId:{},depth:e.depth+1,parentRow:e})});return r.forEach((n,o)=>{const i=Object.fromEntries(Object.values(e.cellForId).map(a=>{const{column:c}=a;if(c.isData()){const m=c.getValue(n);return[c.id,new U({row:t[o],column:c,label:c.cell,value:m})]}if(c.isDisplay())return[c.id,new q({row:t[o],column:c,label:c.cell})];throw new Error("Unrecognized `FlatColumn` implementation")}));t[o].cellForId=i;const l=e.cells.map(a=>i[a.id]);t[o].cells=l}),t},Se=" ";class Oe extends V{label;colspan;colstart;constructor({id:e,label:s,colspan:t,colstart:n}){super({id:e}),this.label=s,this.colspan=t,this.colstart=n}render(){if(this.label instanceof Function){if(this.state===void 0)throw new Error("Missing `state` reference");return this.label(this,this.state)}return this.label}attrs(){return g(super.attrs(),e=>({...e,role:"columnheader",colspan:this.colspan}))}isFlat(){return"__flat"in this}isData(){return"__data"in this}isFlatDisplay(){return"__flat"in this&&"__display"in this}isGroup(){return"__group"in this}isGroupDisplay(){return"__group"in this&&"__display"in this}}class L extends Oe{__flat=!0;constructor({id:e,label:s,colstart:t}){super({id:e,label:s,colspan:1,colstart:t})}clone(){return new L({id:this.id,label:this.label,colstart:this.colstart})}}class oe extends L{__data=!0;accessorKey;accessorFn;constructor({id:e,label:s,accessorKey:t,accessorFn:n,colstart:o}){super({id:e,label:s,colstart:o}),this.accessorKey=t,this.accessorFn=n}clone(){return new oe({id:this.id,label:this.label,accessorFn:this.accessorFn,accessorKey:this.accessorKey,colstart:this.colstart})}}class Q extends L{__display=!0;constructor({id:e,label:s=Se,colstart:t}){super({id:e,label:s,colstart:t})}clone(){return new Q({id:this.id,label:this.label,colstart:this.colstart})}}class Z extends Oe{__group=!0;ids;allId;allIds;constructor({label:e,ids:s,allIds:t,colspan:n,colstart:o}){super({id:`[${s.join(",")}]`,label:e,colspan:n,colstart:o}),this.ids=s,this.allId=`[${t.join(",")}]`,this.allIds=t}setIds(e){this.ids=e,this.id=`[${this.ids.join(",")}]`}pushId(e){this.ids=[...this.ids,e],this.id=`[${this.ids.join(",")}]`}clone(){return new Z({label:this.label,ids:this.ids,allIds:this.allIds,colspan:this.colspan,colstart:this.colstart})}}class le extends Z{__display=!0;constructor({label:e=Se,ids:s,allIds:t,colspan:n=1,colstart:o}){super({label:e,ids:s,allIds:t,colspan:n,colstart:o})}clone(){return new le({label:this.label,ids:this.ids,allIds:this.allIds,colspan:this.colspan,colstart:this.colstart})}}const Dt=r=>r.reduce((e,s)=>e+s,0),De=(r,e)=>{const s=[];for(let t=0;t<e;t++)s.push(Array(r).fill(null));return s},_e=r=>{const e=r.length;if(e===0)return r;const s=r[0].length,t=De(e,s);for(let n=0;n<s;n++)for(let o=0;o<e;o++)t[n][o]=r[o][n];return t};class ie extends V{cells;constructor({id:e,cells:s}){super({id:e}),this.cells=s}attrs(){return g(super.attrs(),e=>({...e,role:"row"}))}clone(){return new ie({id:this.id,cells:this.cells})}}const Bt=(r,e=[])=>{const s=Mt(r);let t=_e(s);return t=Tt(t,e),Gt(t),Kt(_e(t))},Mt=r=>{const e=Dt(r.map(o=>o.isGroup()?o.ids.length:1)),s=Math.max(...r.map(o=>o.height)),t=De(e,s);let n=0;return r.forEach(o=>{const i=s-o.height;Be(t,o,i,n),n+=o.isGroup()?o.ids.length:1}),t.map((o,i)=>o.map((l,a)=>{if(l!==null)return l;if(i===s-1)return new Q({id:a.toString(),colstart:a});const c=t[s-1][a]?.id??a.toString();return new le({ids:[],allIds:[c],colstart:a})}))},Be=(r,e,s,t)=>{if(e.isData()){r[r.length-1][t]=new oe({label:e.header,accessorFn:e.accessorFn,accessorKey:e.accessorKey,id:e.id,colstart:t});return}if(e.isDisplay()){r[r.length-1][t]=new Q({id:e.id,label:e.header,colstart:t});return}if(e.isGroup()){for(let o=0;o<e.ids.length;o++)r[s][t+o]=new Z({label:e.header,colspan:1,allIds:e.ids,ids:[],colstart:t});let n=0;e.columns.forEach(o=>{Be(r,o,s+1,t+n),n+=o.isGroup()?o.ids.length:1});return}},Tt=(r,e)=>{if(e.length===0)return r;const s=[];return e.forEach((t,n)=>{const o=r.find(i=>{const l=i[i.length-1];if(!l.isFlat())throw new Error("The last element of each column must be a `FlatHeaderCell`");return l.id===t});o!==void 0&&s.push(o.map(i=>{const l=i.clone();return l.colstart=n,l}))}),s},Gt=r=>{r.forEach(e=>{const s=e[e.length-1];if(!s.isFlat())throw new Error("The last element of each column must be a `FlatHeaderCell`");e.forEach(t=>{t.isGroup()&&t.pushId(s.id)})})},Kt=r=>r.map((e,s)=>new ie({id:s.toString(),cells:zt(e)})),zt=r=>{if(r.length===0)return r;const e=[];let s=0,t=1;for(;s<r.length;){const n=r[s].clone();if(!n.isGroup()){e.push(n),s++;continue}t=s+1;const o=[...n.ids];for(;t<r.length;){const i=r[t];if(!i.isGroup()||n.allId!==i.allId)break;o.push(...i.ids),t++}n.setIds(o),n.colspan=t-s,e.push(n),s=t}return e},Nt=(r,e,{rowDataId:s}={})=>{const{data:t,plugins:n}=r,o=ve(e),i=D(o),l=g([t,i],([u,f])=>St(u,f,{rowDataId:s})),a=R([]),c=R(),d=R([]),m=R([]),S=R({role:"table"}),O=R({}),W=R({role:"rowgroup"}),Me={data:t,columns:e,flatColumns:o,tableAttrs:S,tableHeadAttrs:O,tableBodyAttrs:W,visibleColumns:a,headerRows:c,originalRows:l,rows:d,pageRows:m},y=Object.fromEntries(Object.entries(n).map(([u,f])=>{const h=Object.fromEntries(o.map(b=>{const w=b.plugins?.[u];if(w!==void 0)return[b.id,w]}).filter(C));return[u,f({pluginName:u,tableState:Me,columnOptions:h})]})),ae=Object.fromEntries(Object.entries(y).map(([u,f])=>[u,f.pluginState])),v={data:t,columns:e,flatColumns:o,tableAttrs:S,tableHeadAttrs:O,tableBodyAttrs:W,visibleColumns:a,headerRows:c,originalRows:l,rows:d,pageRows:m,pluginStates:ae},Te=Object.values(y).map(u=>u.deriveTableAttrs).filter(C);let X=D({role:"table"});Te.forEach(u=>{X=u(X)});const Ge=g(X,u=>{const f=B(u);return S.set(f),f}),Ke=Object.values(y).map(u=>u.deriveTableBodyAttrs).filter(C);let Y=D({});Ke.forEach(u=>{Y=u(Y)});const ze=g(Y,u=>{const f=B(u);return O.set(f),f}),Ne=Object.values(y).map(u=>u.deriveTableBodyAttrs).filter(C);let x=D({role:"rowgroup"});Ne.forEach(u=>{x=u(x)});const Pe=g(x,u=>{const f=B(u);return W.set(f),f}),Ve=Object.values(y).map(u=>u.deriveFlatColumns).filter(C);let ee=i;Ve.forEach(u=>{ee=u(ee)});const te=g(ee,u=>(a.set(u),u)),Ue=g([l,te],([u,f])=>Ot(u,f.map(h=>h.id))),qe=Object.values(y).map(u=>u.deriveRows).filter(C);let se=Ue;qe.forEach(u=>{se=u(se)});const ce=g(se,u=>(u.forEach(f=>{f.injectState(v),f.cells.forEach(h=>{h.injectState(v)})}),Object.entries(y).forEach(([f,h])=>{u.forEach(b=>{h.hooks?.["tbody.tr"]!==void 0&&b.applyHook(f,h.hooks["tbody.tr"](b)),b.cells.forEach(w=>{h.hooks?.["tbody.tr.td"]!==void 0&&w.applyHook(f,h.hooks["tbody.tr.td"](w))})})}),d.set(u),u)),Je=Object.values(y).map(u=>u.derivePageRows).filter(C);let ne=ce;Je.forEach(u=>{ne=u(ne)});const Le=g(ne,u=>(u.forEach(f=>{f.injectState(v),f.cells.forEach(h=>{h.injectState(v)})}),Object.entries(y).forEach(([f,h])=>{u.forEach(b=>{h.hooks?.["tbody.tr"]!==void 0&&b.applyHook(f,h.hooks["tbody.tr"](b)),b.cells.forEach(w=>{h.hooks?.["tbody.tr.td"]!==void 0&&w.applyHook(f,h.hooks["tbody.tr.td"](w))})})}),m.set(u),u)),Qe=g(te,u=>{const f=Bt(e,u.map(h=>h.id));return f.forEach(h=>{h.injectState(v),h.cells.forEach(b=>{b.injectState(v)})}),Object.entries(y).forEach(([h,b])=>{f.forEach(w=>{b.hooks?.["thead.tr"]!==void 0&&w.applyHook(h,b.hooks["thead.tr"](w)),w.cells.forEach(ue=>{b.hooks?.["thead.tr.th"]!==void 0&&ue.applyHook(h,b.hooks["thead.tr.th"](ue))})})}),c.set(f),f});return{tableAttrs:Ge,tableHeadAttrs:ze,tableBodyAttrs:Pe,visibleColumns:te,flatColumns:o,headerRows:Qe,originalRows:l,rows:ce,pageRows:Le,pluginStates:ae}};class Pt{data;plugins;constructor(e,s){this.data=e,this.plugins=s}createColumns(e){const s=Re(e),t=At(s);if(t.length!==0)throw new Error(`Duplicate column ids not allowed: "${t.join('", "')}"`);return e}column(e){return new Et(e)}group(e){return new Rt(e)}display(e){return new jt(e)}createViewModel(e,s){return Nt(this,e,s)}}const Jt=(r,e={})=>new Pt(r,e);export{He as D,Ct as R,lt as S,U as a,Ut as b,Jt as c,qt as g,C as n,Dt as s};
