import{S as P,i as V,s as A,e as v,a as O,b as W,c as ge,d as b,f as p,g as me,l as X,h as pe,u as ve,o as we,j as be,t as E,k as G,m as k,n as ue,p as ke,q as R,r as Ce,v as ye,w as Le,x as U,y as Q,z as T,A as x,B as F,C as L,D as I,E as $,F as N,G as He,H as Y,I as Z,J as ee,K as De}from"./index-4b9af07b.js";import{L as qe}from"./Layout-81378871.js";import{c as Re}from"./mockData-2ff34739.js";class Ee{constructor(e,t){this.items=e,this.renderRows=new Map,this.renderColumns=[];const n=Object.keys(e[0]);this.columns=n.map((s,a)=>({name:s,index:a}));const l=e[0];if(l)for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&(this.renderColumns.push(s),console.log(this.renderColumns));e.forEach(s=>{if(typeof s.id!="string")throw new Error("item.id is not string");typeof s.id=="string"&&this.renderRows.set(s.id,s)}),console.log("this.items",this.items)}getRenderRowList(){return this.items}getRenderColumnList(){return this.renderColumns}setColumnOption(e){e.map(t=>{})}_setRenderList(){}_rowChange(){}_columnChange(e,t){if(e===t||e<0||t<0||e>this.columns.length-1||t>this.columns.length-1)throw new Error("error");const l=[...this.columns];l.splice(t,0,l.splice(e,1)[0]);for(let s=e+1;s<=t;s++)l[s].index-=1;this.columns=l,this.renderColumns=l.map(s=>s.name),console.log(l)}_columnFloat(){}_columnDown(){}_columnMove(){}columnChange(){}}function te(i,e,t){const n=i.slice();return n[23]=e[t],n}const Ge=i=>({item:i&16}),le=i=>({item:i[23].data});function Me(i){let e;return{c(){e=T("Missing template")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function ne(i,e){let t,n,l;const s=e[14].default,a=ke(s,e,e[13],le),r=a||Me();return{key:i,first:null,c(){t=v("svelte-virtual-list-row"),r&&r.c(),n=R(),W(t,"class","svelte-1tqh76q"),this.first=t},m(c,o){b(c,t,o),r&&r.m(t,null),p(t,n),l=!0},p(c,o){e=c,a&&a.p&&(!l||o&8208)&&Ce(a,s,e,e[13],l?Le(s,e[13],o,Ge):ye(e[13]),le)},i(c){l||(E(r,c),l=!0)},o(c){G(r,c),l=!1},d(c){c&&k(t),r&&r.d(c)}}}function ze(i){let e,t,n=[],l=new Map,s,a,r,c,o=i[4];const h=u=>u[23].index;for(let u=0;u<o.length;u+=1){let _=te(i,o,u),d=h(_);l.set(d,n[u]=ne(d,_))}return{c(){e=v("svelte-virtual-list-viewport"),t=v("svelte-virtual-list-contents");for(let u=0;u<n.length;u+=1)n[u].c();O(t,"padding-top",i[5]+"px"),O(t,"padding-bottom",i[6]+"px"),W(t,"class","svelte-1tqh76q"),O(e,"height",i[0]),W(e,"class","svelte-1tqh76q"),ge(()=>i[17].call(e))},m(u,_){b(u,e,_),p(e,t);for(let d=0;d<n.length;d+=1)n[d].m(t,null);i[15](t),i[16](e),s=me(e,i[17].bind(e)),a=!0,r||(c=X(e,"scroll",i[7]),r=!0)},p(u,[_]){_&8208&&(o=u[4],pe(),n=ve(n,_,h,1,u,o,l,t,we,ne,null,te),be()),(!a||_&32)&&O(t,"padding-top",u[5]+"px"),(!a||_&64)&&O(t,"padding-bottom",u[6]+"px"),(!a||_&1)&&O(e,"height",u[0])},i(u){if(!a){for(let _=0;_<o.length;_+=1)E(n[_]);a=!0}},o(u){for(let _=0;_<n.length;_+=1)G(n[_]);a=!1},d(u){u&&k(e);for(let _=0;_<n.length;_+=1)n[_].d();i[15](null),i[16](null),s(),r=!1,c()}}}function Be(i,e,t){let{$$slots:n={},$$scope:l}=e,{items:s}=e,{height:a="100%"}=e,{itemHeight:r=void 0}=e,{start:c=0}=e,{end:o=0}=e,h=[],u,_,d,C=0,M,z,g=0,H=0,y;async function J(f,B,w){const{scrollTop:D}=_;await U();let j=g-D,m=c;for(;j<B&&m<f.length;){let S=u[m-c];S||(t(9,o=m+1),await U(),S=u[m-c]);const q=h[m]=w||S.offsetHeight;j+=q,m+=1}t(9,o=m);const K=f.length-o;y=(g+j)/o,t(6,H=K*y),h.length=f.length}async function _e(){const{scrollTop:f}=_,B=c;for(let m=0;m<u.length;m+=1)h[c+m]=r||u[m].offsetHeight;let w=0,D=0;for(;w<s.length;){const m=h[w]||y;if(D+m>f){t(8,c=w),t(5,g=D);break}D+=m,w+=1}for(;w<s.length&&(D+=h[w]||y,w+=1,!(D>f+C)););t(9,o=w);const j=s.length-o;for(y=D/o;w<s.length;)h[w++]=y;if(t(6,H=j*y),c<B){await U();let m=0,K=0;for(let q=c;q<B;q+=1)u[q-c]&&(m+=h[q],K+=r||u[q-c].offsetHeight);const S=K-m;_.scrollTo(0,f+S)}}ue(()=>{u=d.getElementsByTagName("svelte-virtual-list-row"),t(12,z=!0)});function fe(f){Q[f?"unshift":"push"](()=>{d=f,t(3,d)})}function he(f){Q[f?"unshift":"push"](()=>{_=f,t(2,_)})}function de(){C=this.offsetHeight,t(1,C)}return i.$$set=f=>{"items"in f&&t(10,s=f.items),"height"in f&&t(0,a=f.height),"itemHeight"in f&&t(11,r=f.itemHeight),"start"in f&&t(8,c=f.start),"end"in f&&t(9,o=f.end),"$$scope"in f&&t(13,l=f.$$scope)},i.$$.update=()=>{i.$$.dirty&1792&&t(4,M=s.slice(c,o).map((f,B)=>({index:B+c,data:f}))),i.$$.dirty&7170&&z&&J(s,C,r)},[a,C,_,d,M,g,H,_e,c,o,s,r,z,l,n,fe,he,de]}class Oe extends P{constructor(e){super(),V(this,e,Be,ze,A,{items:10,height:0,itemHeight:11,start:8,end:9})}}function se(i,e,t){const n=i.slice();return n[7]=e[t],n}function ie(i,e,t){const n=i.slice();return n[10]=e[t],n}function re(i){let e=console.log()+"",t,n,l,s,a=i[10]+"",r;return{c(){t=T(e),n=R(),l=v("div"),s=T("row"),r=T(a),L(l,"class","svelte-n4dt7m")},m(c,o){b(c,t,o),b(c,n,o),b(c,l,o),p(l,s),p(l,r)},p(c,o){o&64&&a!==(a=c[10]+"")&&Z(r,a)},d(c){c&&k(t),c&&k(n),c&&k(l)}}}function oe(i){let e,t,n=i[6],l=[];for(let s=0;s<n.length;s+=1)l[s]=re(ie(i,n,s));return{c(){e=v("div");for(let s=0;s<l.length;s+=1)l[s].c();t=R(),L(e,"class","row svelte-n4dt7m")},m(s,a){b(s,e,a);for(let r=0;r<l.length;r+=1)l[r].m(e,null);p(e,t)},p(s,a){if(a&64){n=s[6];let r;for(r=0;r<n.length;r+=1){const c=ie(s,n,r);l[r]?l[r].p(c,a):(l[r]=re(c),l[r].c(),l[r].m(e,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(s){s&&k(e),Y(l,s)}}}function Te(i){let e,t=i[0],n=[];for(let l=0;l<t.length;l+=1)n[l]=oe(se(i,t,l));return{c(){for(let l=0;l<n.length;l+=1)n[l].c();e=He()},m(l,s){for(let a=0;a<n.length;a+=1)n[a].m(l,s);b(l,e,s)},p(l,s){if(s&65){t=l[0];let a;for(a=0;a<t.length;a+=1){const r=se(l,t,a);n[a]?n[a].p(r,s):(n[a]=oe(r),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(l){Y(n,l),l&&k(e)}}}function je(i){let e,t,n,l,s;function a(o){i[4](o)}function r(o){i[5](o)}let c={items:i[0],height:"500px",$$slots:{default:[Te,({item:o})=>({6:o}),({item:o})=>o?64:0]},$$scope:{ctx:i}};return i[1]!==void 0&&(c.start=i[1]),i[2]!==void 0&&(c.end=i[2]),t=new Oe({props:c}),Q.push(()=>x(t,"start",a,i[1])),Q.push(()=>x(t,"end",r,i[2])),{c(){e=v("div"),F(t.$$.fragment),L(e,"class","tbody svelte-n4dt7m")},m(o,h){b(o,e,h),I(t,e,null),s=!0},p(o,[h]){const u={};h&1&&(u.items=o[0]),h&8257&&(u.$$scope={dirty:h,ctx:o}),!n&&h&2&&(n=!0,u.start=o[1],$(()=>n=!1)),!l&&h&4&&(l=!0,u.end=o[2],$(()=>l=!1)),t.$set(u)},i(o){s||(E(t.$$.fragment,o),s=!0)},o(o){G(t.$$.fragment,o),s=!1},d(o){o&&k(e),N(t)}}}function Se(i,e,t){let{rowsData:n}=e,{renderColumnList:l}=e;console.log("rowsData",n);let s,a;function r(o){s=o,t(1,s)}function c(o){a=o,t(2,a)}return i.$$set=o=>{"rowsData"in o&&t(0,n=o.rowsData),"renderColumnList"in o&&t(3,l=o.renderColumnList)},[n,s,a,l,r,c]}class Fe extends P{constructor(e){super(),V(this,e,Se,je,A,{rowsData:0,renderColumnList:3})}}function ae(i,e,t){const n=i.slice();return n[2]=e[t],n}function ce(i){let e,t=i[2]+"",n;return{c(){e=v("div"),n=T(t),L(e,"draggable","true"),L(e,"class","svelte-n708hl")},m(l,s){b(l,e,s),p(e,n)},p(l,s){s&1&&t!==(t=l[2]+"")&&Z(n,t)},d(l){l&&k(e)}}}function Ie(i){let e,t,n=i[0],l=[];for(let s=0;s<n.length;s+=1)l[s]=ce(ae(i,n,s));return{c(){e=v("div"),t=v("div");for(let s=0;s<l.length;s+=1)l[s].c();L(t,"class","row svelte-n708hl"),L(e,"class","header svelte-n708hl")},m(s,a){b(s,e,a),p(e,t);for(let r=0;r<l.length;r+=1)l[r].m(t,null)},p(s,[a]){if(a&1){n=s[0];let r;for(r=0;r<n.length;r+=1){const c=ae(s,n,r);l[r]?l[r].p(c,a):(l[r]=ce(c),l[r].c(),l[r].m(t,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},i:ee,o:ee,d(s){s&&k(e),Y(l,s)}}}function Ne(i,e,t){let{grid:n}=e,{renderColumnList:l}=e;return ue(()=>{document.querySelector(".header").addEventListener("click",()=>{console.log("aa"),console.log("grid",n)})}),i.$$set=s=>{"grid"in s&&t(1,n=s.grid),"renderColumnList"in s&&t(0,l=s.renderColumnList)},[l,n]}class Pe extends P{constructor(e){super(),V(this,e,Ne,Ie,A,{grid:1,renderColumnList:0})}}function Ve(i){let e,t,n,l,s,a,r,c,o,h,u,_,d,C,M,z;return u=new Pe({props:{grid:i[2],renderColumnList:i[0]}}),d=new Fe({props:{rowsData:i[3],renderColumnList:i[0]}}),{c(){e=v("div"),t=v("button"),t.textContent="count+1",n=R(),l=v("p"),s=T(i[1]),a=R(),r=v("button"),r.textContent="aaa",c=R(),o=v("div"),h=v("div"),F(u.$$.fragment),_=R(),F(d.$$.fragment),L(h,"class","table svelte-1bp3l6u"),L(o,"class","table_wrapper svelte-1bp3l6u"),L(e,"class","test")},m(g,H){b(g,e,H),p(e,t),p(e,n),p(e,l),p(l,s),p(e,a),p(e,r),p(e,c),p(e,o),p(o,h),I(u,h,null),p(h,_),I(d,h,null),C=!0,M||(z=[X(t,"click",i[4]),X(r,"click",i[5])],M=!0)},p(g,[H]){(!C||H&2)&&Z(s,g[1]);const y={};H&1&&(y.renderColumnList=g[0]),u.$set(y);const J={};H&1&&(J.renderColumnList=g[0]),d.$set(J)},i(g){C||(E(u.$$.fragment,g),E(d.$$.fragment,g),C=!0)},o(g){G(u.$$.fragment,g),G(d.$$.fragment,g),C=!1},d(g){g&&k(e),N(u),N(d),M=!1,De(z)}}}function Ae(i,e,t){let n=Re(400);const l=new Ee(n,{resizable:!0});let s=l.getRenderColumnList(),a=l.items,r=0;return[s,r,l,a,()=>t(1,r++,r),()=>{l._columnChange(0,7);const h=l.getRenderColumnList();t(0,s=[...h])}]}class Je extends P{constructor(e){super(),V(this,e,Ae,Ve,A,{})}}function Ke(i){let e,t;return e=new Je({}),{c(){F(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function Qe(i){let e,t;return e=new qe({props:{$$slots:{default:[Ke]},$$scope:{ctx:i}}}),{c(){F(e.$$.fragment)},m(n,l){I(e,n,l),t=!0},p(n,[l]){const s={};l&1&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}class Ye extends P{constructor(e){super(),V(this,e,null,Qe,A,{})}}export{Ye as default};
